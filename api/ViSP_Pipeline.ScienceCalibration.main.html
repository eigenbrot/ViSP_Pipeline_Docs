
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>main &#8212; ViSP_Pipeline v0.21.0</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700" type="text/css" />
    <link rel="stylesheet" href="../_static/dkist.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favico.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="polarimetric_multiplication" href="ViSP_Pipeline.ScienceCalibration.polarimetric_multiplication.html" />
    <link rel="prev" title="instrument_pol_correction" href="ViSP_Pipeline.ScienceCalibration.instrument_pol_correction.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="col-md-3 navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://nso.edu"><img src="../_static/img/NSOlogo.gif">
        </a>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav hidden">
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">ViSP Pipeline Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config_file.html">Configuration File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../walkthrough.html">Data Reduction Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IPA_access.html">Instrument Partner Testing Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_warning.html">A Word About Data, RAM, and Disk Space</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../API.html">Reference/API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">main</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="ViSP_Pipeline.ScienceCalibration.instrument_pol_correction.html" title="Previous Chapter: instrument_pol_correction"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; instrument_po...</span>
    </a>
  </li>
  <li>
    <a href="ViSP_Pipeline.ScienceCalibration.polarimetric_multiplication.html" title="Next Chapter: polarimetric_multiplication"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">polarimetric_... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>
          
            <ul class="nav navbar-nav navbar-left">
              <li><a href="http://dkist.nso.edu/">DKIST</a></li>
            </ul>
          
          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">

    <div class="col-md-3"><div id="side-logo" >
            <a href="http://dkist.nso.edu">
                <img src="../_static/img/DKISTLogo-Medium.jpg">
            </a>
        </div><div id="sidebar" class="bs-sidenav" role="complementary">
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">ViSP Pipeline Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config_file.html">Configuration File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../walkthrough.html">Data Reduction Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IPA_access.html">Instrument Partner Testing Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_warning.html">A Word About Data, RAM, and Disk Space</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../API.html">Reference/API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-ViSP_Pipeline.ViSPPipeline">ViSP_Pipeline.ViSPPipeline Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-ViSP_Pipeline.ViSPPolCalPipeline">ViSP_Pipeline.ViSPPolCalPipeline Module</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../API.html#module-ViSP_Pipeline.ScienceCalibration">ViSP_Pipeline.ScienceCalibration Module</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../API.html#id2">Functions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.average_beams.html">average_beams</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.average_polarimetric_beams.html">average_polarimetric_beams</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.command_line.html">command_line</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.command_line_list.html">command_line_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.extract_geometric_numbers.html">extract_geometric_numbers</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.generate_science_calibration.html">generate_science_calibration</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.geometric_correction.html">geometric_correction</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.instrument_pol_correction.html">instrument_pol_correction</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">main</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.polarimetric_multiplication.html">polarimetric_multiplication</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.telescope_pol_correction.html">telescope_pol_correction</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.verify_useful_dark.html">verify_useful_dark</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.verify_useful_demodulation.html">verify_useful_demodulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.verify_useful_gain.html">verify_useful_gain</a></li>
<li class="toctree-l4"><a class="reference internal" href="ViSP_Pipeline.ScienceCalibration.verify_useful_geometric.html">verify_useful_geometric</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-ViSP_Pipeline.InstrumentPolCalibration">ViSP_Pipeline.InstrumentPolCalibration Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-ViSP_Pipeline.Data">ViSP_Pipeline.Data Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-ViSP_Pipeline.generic">ViSP_Pipeline.generic Module</a></li>
</ul>
</li>
</ul>

            
        </div>
    </div>

    <div class="body col-md-9 content" role="main">
      
  <div class="section" id="main">
<h1>main<a class="headerlink" href="#main" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="ViSP_Pipeline.ScienceCalibration.main">
<code class="sig-prename descclassname">ViSP_Pipeline.ScienceCalibration.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">datasetData, slit_pos, outpre, dark_cal=None, solar_gain_cal=None, geometric_cal=None, dark_cal_err=None, solar_gain_cal_err=None, gen_err=True, dark_lock=&lt;contextlib.nullcontext object&gt;, gain_lock=&lt;contextlib.nullcontext object&gt;, geo_lock=&lt;contextlib.nullcontext object&gt;, pol_lock=&lt;contextlib.nullcontext object&gt;, pol=False, demodulation=None, telescope_db=None, remove_tele=True, include_parallactic=True, save_M12_map=True, M12_line_lims=[0, -1], continuum_lims=[0, -1]</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ViSP_Pipeline/ScienceCalibration.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ViSP_Pipeline.ScienceCalibration.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Run raw data through the Science Calibration pipeline.</p>
<p>If no intermediate Calibration objects are provided then the pipeline simply averages the (potentially
distorted!) beams. This is probably not what you want.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>datasetData</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data.DataSetData</span></code></span></dt><dd><p>Object containing file metadata for all files associated with the data set to be reduced</p>
</dd>
<dt><strong>slit_pos</strong><span class="classifier">int</span></dt><dd><p>The slit (i.e. spatial) position to load. Files are matched to this parameter with the VISP_CSS header keyword</p>
</dd>
<dt><strong>outpre</strong><span class="classifier">str</span></dt><dd><p>Prefix of the location to save processed data. Can include the full path. The processed data will be saved as
outpre.fits and associated uncertainties (if provided) will be saved as outpre_err.fits.</p>
</dd>
<dt><strong>dark_cal</strong><span class="classifier">Data.FitsData</span></dt><dd><p>A Dark Calibration object. Probably the result of DarkCalibration.main().</p>
</dd>
<dt><strong>solar_gain_cal</strong><span class="classifier">Data.FitsData</span></dt><dd><p>A Solar Gain Calibration object. Probably the result of SolarGainCalibration.main().</p>
</dd>
<dt><strong>geometric_cal</strong><span class="classifier">Data.FitsData</span></dt><dd><p>A Geometric Calibration object. Probably produced by SolarGainCalibration.main().</p>
</dd>
<dt><strong>dark_cal_err</strong><span class="classifier">Data.FitsData</span></dt><dd><p>Uncertainty associated with dark_cal</p>
</dd>
<dt><strong>solar_gain_cal_err</strong><span class="classifier">Data.FitsData</span></dt><dd><p>Uncertainty associated with solar_gain_cal</p>
</dd>
<dt><strong>gen_err</strong><span class="classifier">bool</span></dt><dd><p>If True then pixel uncertainties will be generated from the raw data frames</p>
</dd>
<dt><strong>demodulation</strong><span class="classifier">Data.DemodulationData</span></dt><dd><p>Object containing an array of shape (X, Y, 4, M) containing the demodulation matrix for each (x, y) pixel.
This is probably the output of PolarimetricCalibration.upsample_demodulation.</p>
</dd>
<dt><strong>telescope_db</strong><span class="classifier">str</span></dt><dd><p>Path to the database of telescope properties (x,        au).</p>
</dd>
<dt><strong>dark_lock</strong><span class="classifier">multiprocessing.synchronize.lock</span></dt><dd><p>This lock will be used when reading information from the dark calibration object. This avoids some weirdness in
astropy’s FITS containers when accessing the same data at the same time.</p>
</dd>
<dt><strong>gain_lock</strong><span class="classifier">multiprocessing.synchronize.lock</span></dt><dd><p>This lock will be used when reading information from the gain calibration object. This avoids some weirdness in
astropy’s FITS containers when accessing the same data at the same time.</p>
</dd>
<dt><strong>geo_lock</strong><span class="classifier">multiprocessing.synchronize.lock</span></dt><dd><p>This lock will be used when reading information from the geometric calibration object. This avoids some
weirdness in astropy’s FITS containers when accessing the same data at the same time.</p>
</dd>
<dt><strong>pol_lock</strong><span class="classifier">multiprocessing.synchronize.lock</span></dt><dd><p>This lock will be used when reading information from the demodulation calibration object. This avoids some
weirdness in astropy’s FITS containers when accessing the same data at the same time.</p>
</dd>
<dt><strong>remove_tele</strong><span class="classifier">bool</span></dt><dd><p>If True the inverse Telescope Model will be applied to the demodulated Stokes data</p>
</dd>
<dt><strong>include_parallactic</strong><span class="classifier">bool</span></dt><dd><p>If True the data will be rotated into the DKIST common reference frame</p>
</dd>
<dt><strong>save_M12_map</strong><span class="classifier">bool</span></dt><dd><p>If True a copy of the reduced data WITHOUT an inverse M12 correction will be saved for later use by the PA&amp;C
Modules. This copy will be truncated in wavelength to save space.</p>
</dd>
<dt><strong>M12_line_lims</strong><span class="classifier">list</span></dt><dd><p>If <code class="xref py py-obj docutils literal notranslate"><span class="pre">save_M12_map</span> <span class="pre">=</span> <span class="pre">True</span></code> then this list defines the wavelength pixel range that contains a strong polarization
signal (i.e., a spectral line).</p>
</dd>
<dt><strong>continuum_lims</strong><span class="classifier">list</span></dt><dd><p>The wavelength pixel range that contains primarily continuum signal. These data are extracted to update a
database of X12 mirror parameters.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>Data.FitsData</dt><dd><p>Level 1 ViSP Science Data with all of the provided Calibrations applied</p>
</dd>
<dt>Data.FitsData</dt><dd><p>If uncertainty on the input data is provided, the uncertainty associated with the Level 1 Science Data product.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <div class="left-footer">
         &copy; 2021, Arthur Eigenbrot
       <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a>
    </div>
   
    <div class="right-footer">
      Last updated on 22 Jan 2021.
    </div>
    <div class="centre-footer">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.3.1
    </div>
  </div>
</footer>
  </body>
</html>