
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Configuration File Format &#8212; ViSP_Pipeline v0.7.0</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700" type="text/css" />
    <link rel="stylesheet" href="_static/dkist.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/favico.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Reduction Walkthrough" href="walkthrough.html" />
    <link rel="prev" title="ViSP Pipeline Documentation" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="col-md-3 navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://nso.edu"><img src="_static/img/NSOlogo.gif">
        </a>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav hidden">
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">ViSP Pipeline Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="walkthrough.html">Data Reduction Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_warning.html">A Word About Data, RAM, and Disk Space</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">Reference/API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Configuration File Format</a><ul>
<li><a class="reference internal" href="#main">Main</a></li>
<li><a class="reference internal" href="#darkcalibration">DarkCalibration</a></li>
<li><a class="reference internal" href="#lampgaincalibration">LampGainCalibration</a></li>
<li><a class="reference internal" href="#solargaincalibration">SolarGainCalibration</a></li>
<li><a class="reference internal" href="#polarimetriccalibration">PolarimetricCalibration</a></li>
<li><a class="reference internal" href="#example-config-file">Example Config File</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="index.html" title="Previous Chapter: ViSP Pipeline Documentation"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ViSP Pipeline...</span>
    </a>
  </li>
  <li>
    <a href="walkthrough.html" title="Next Chapter: Data Reduction Walkthrough"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Data Reductio... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>
          
            <ul class="nav navbar-nav navbar-left">
              <li><a href="http://dkist.nso.edu/">DKIST</a></li>
              <li><a href="http://docs.cadair.com/devdocs">DC Developer Guide</a></li>
              <li><a href="http://docs.cadair.com/datarate">DKIST Data Rate</a></li>
              <li><a href="http://docs.cadair.com/datamodel">DKIST Data Model</a></li>
            </ul>
          
          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">

    <div class="col-md-3"><div id="side-logo" >
            <a href="http://dkist.nso.edu">
                <img src="_static/img/DKISTLogo-Medium.jpg">
            </a>
        </div><div id="sidebar" class="bs-sidenav" role="complementary">
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">ViSP Pipeline Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration File Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#main">Main</a></li>
<li class="toctree-l2"><a class="reference internal" href="#darkcalibration">DarkCalibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lampgaincalibration">LampGainCalibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#solargaincalibration">SolarGainCalibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#polarimetriccalibration">PolarimetricCalibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-config-file">Example Config File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="walkthrough.html">Data Reduction Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_warning.html">A Word About Data, RAM, and Disk Space</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">Reference/API</a></li>
</ul>

            
        </div>
    </div>

    <div class="col-md-9 content">
      
  <div class="section" id="configuration-file-format">
<h1>Configuration File Format<a class="headerlink" href="#configuration-file-format" title="Permalink to this headline">¶</a></h1>
<p>The ViSP Pipeline configuration file is in the standard INI format and contains the following sections and options. Any
options in <em>italics</em> is optional and is probably a debug/testing option.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is OK to put science and calibration data all into the same directory. The specific task (Dark, Gain, Observation,
etc.) is determined from the <code class="xref py py-obj docutils literal notranslate"><span class="pre">DKIST004</span></code> header value.</p>
</div>
<div class="section" id="main">
<h2>Main<a class="headerlink" href="#main" title="Permalink to this headline">¶</a></h2>
<p>This section controls the top-level Science reduction. All of the *_cal options point to files that will not exist
on the first run of the pipeline. Once these objects have been created a lot of time can be saved by reusing them for
any other science runs that have the same setup. It is also possible to regenerate only a subset of the intermediate
Calibration Objects by simply pointing the corresponding option to a file that doesn’t exist.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">raw_sci_dir:</th><td class="field-body"><p class="first">Path to the directory containing raw ViSP frames to be reduced. Note that <em>all</em> slit positions found in
this directory will be reduced. If you only want to reduce a subset of slit positions then move them into a separate
folder or use the <code class="docutils literal notranslate"><span class="pre">slit_pos</span></code> option.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">data_set_id:</th><td class="field-body"><p class="first">Only reduce files with this <code class="xref py py-obj docutils literal notranslate"><span class="pre">ID_004</span></code> header value. Can be left blank to reduce all files in <code class="docutils literal notranslate"><span class="pre">raw_sci_dir</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">output_prefix:</th><td class="field-body"><p class="first">The prefix to apply to all Level-1 science products. This string can also include a path structure.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">dark_cal:</th><td class="field-body"><p class="first">The location of a processed Dark Calibration object. If this file does not exist it will be generated.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">lamp_gain_cal:</th><td class="field-body"><p class="first">The location of a processed Lamp Gain Calibration object. If this file does not exist it will be generated.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">solar_gain_cal:</th><td class="field-body"><p class="first">The location of a processed Solar Gain Calibration object. If this files does not exist it will be generated.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">geometric_cal:</th><td class="field-body"><p class="first">The location of a processed Geometric Calibration object. If this file does not exist it will be generated.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">gen_noise_frames:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">If True then uncertinaty frames (suffixed “_err.fits”) will be generated from the raw data and propagated through the pipeline. <strong>NOTE</strong> This more than doubles the total processing time.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">threads:</th><td class="field-body"><p class="first"><strong>(int)</strong> The number of separate processes to spawn when reducing the raw science data.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2"><em>remove_tele_pol</em>:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">If False, do NOT apply the inverse Telescope Model. Useful for synthetic data that were created without a TM.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name"><em>slit_pos</em>:</th><td class="field-body"><p class="first">If present, this option is used to specify a subset of slit positions to reduce. This option can have one of
three forms:</p>
<blockquote class="last">
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">int:</th><td class="field-body">Just reduce a single slit position. Ex: <code class="xref py py-obj docutils literal notranslate"><span class="pre">423</span></code></td>
</tr>
<tr class="field-even field"><th class="field-name">list:</th><td class="field-body">Reduce the exact list of slit positions specified. Ex: <code class="xref py py-obj docutils literal notranslate"><span class="pre">[423,</span> <span class="pre">890,</span> <span class="pre">132]</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">NNN:MMM:</th><td class="field-body">Reduce the slit positions specified by <code class="xref py py-obj docutils literal notranslate"><span class="pre">range(NNN,</span> <span class="pre">MMM)</span></code>. Ex: <code class="xref py py-obj docutils literal notranslate"><span class="pre">14:423</span></code></td>
</tr>
</tbody>
</table>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="darkcalibration">
<h2>DarkCalibration<a class="headerlink" href="#darkcalibration" title="Permalink to this headline">¶</a></h2>
<p>This section will only be used if the file specified by <code class="docutils literal notranslate"><span class="pre">Main.dark_cal</span></code> does not exist.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">raw_dark_dir:</th><td class="field-body">The location of a directory containing raw dark frames. If <code class="docutils literal notranslate"><span class="pre">dark_cal</span></code> does not exist then this
directory must contain dark frames or an error will be thrown.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="lampgaincalibration">
<h2>LampGainCalibration<a class="headerlink" href="#lampgaincalibration" title="Permalink to this headline">¶</a></h2>
<p>This section will only be used if the file specified by <code class="docutils literal notranslate"><span class="pre">Main.lamp_gain_cal</span></code> does not exist.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">raw_lamp_gain:</th><td class="field-body">The location of a directory containing raw dark frames. If <code class="docutils literal notranslate"><span class="pre">lamp_gain_cal</span></code> does not exist then this
directory must contain lamp gain frames or an error will be thrown.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="solargaincalibration">
<h2>SolarGainCalibration<a class="headerlink" href="#solargaincalibration" title="Permalink to this headline">¶</a></h2>
<p>This section will only be used if the file specified by <code class="docutils literal notranslate"><span class="pre">Main.solar_gain_cal</span></code> does not exist.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">raw_solar_gain:</th><td class="field-body">The location of a directory containing raw dark frames. If <code class="docutils literal notranslate"><span class="pre">solar_gain_cal</span></code> does not exist then this
directory must contain solar gain frames or an error will be thrown.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="polarimetriccalibration">
<h2>PolarimetricCalibration<a class="headerlink" href="#polarimetriccalibration" title="Permalink to this headline">¶</a></h2>
<p>These options essentially define a separate ViSP reduction; the reduction of a polarimetric Calibration Sequence (CS).
The software will automatically decide the names for the output prefix and Calibration Objects. These will all be saved
to <code class="docutils literal notranslate"><span class="pre">raw_pol_dir</span></code>/proc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">raw_pol_dir:</th><td class="field-body">Path to a directory containing the raw ViSP files for a CS</td>
</tr>
<tr class="field-even field"><th class="field-name">raw_dark_dir:</th><td class="field-body">Path to the raw dark files associated with the CS</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">raw_lamp_gain_dir:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Path to the raw lamp gain files associated with the CS</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">raw_solar_gain_dir:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Path to the raw solar gain files associated with the CS</td>
</tr>
<tr class="field-odd field"><th class="field-name">telescope_db:</th><td class="field-body">Path to the file containing telescope mirror parameters as a function of time and wavelength</td>
</tr>
<tr class="field-even field"><th class="field-name">num_bins_x:</th><td class="field-body"><strong>(int)</strong> The number of x-dimensions macropixels in the down-sampled CS data</td>
</tr>
<tr class="field-odd field"><th class="field-name">num_bins_y:</th><td class="field-body"><strong>(int)</strong> The number of y-dimensions macropixels in the down-sampled CS data</td>
</tr>
<tr class="field-even field"><th class="field-name">threads:</th><td class="field-body"><strong>(int)</strong> The number of separate processes to use when reducing the CS data</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-config-file">
<h2>Example Config File<a class="headerlink" href="#example-config-file" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Main]</span>
<span class="na">raw_sci_dir</span> <span class="o">=</span> <span class="s">visp_run_1</span>
<span class="na">data_set_id</span> <span class="o">=</span>
<span class="na">output_prefix</span> <span class="o">=</span> <span class="s">visp_run_1/rdx</span>
<span class="na">dark_cal</span> <span class="o">=</span> <span class="s">DarkCal.fits</span>
<span class="na">lamp_gain_cal</span> <span class="o">=</span> <span class="s">LampGainCal.fits</span>
<span class="na">solar_gain_cal</span> <span class="o">=</span> <span class="s">SolarGainCal.fits</span>
<span class="na">geometric_cal</span> <span class="o">=</span> <span class="s">GeoCal.fits</span>
<span class="na">gen_noise_frames</span> <span class="o">=</span> <span class="s">True</span>
<span class="na">remove_tele_pol</span> <span class="o">=</span> <span class="s">False</span>
<span class="na">slit_pos</span> <span class="o">=</span> <span class="s">[0, 458, 111]</span>
<span class="na">threads</span> <span class="o">=</span> <span class="s">3</span>

<span class="k">[DarkCalibration]</span>
<span class="na">raw_dark_dir</span> <span class="o">=</span> <span class="s">visp_run_1</span>

<span class="k">[LampGainCalibration]</span>
<span class="na">raw_lamp_gain_dir</span> <span class="o">=</span> <span class="s">visp_run_1</span>

<span class="k">[SolarGainCalibration]</span>
<span class="na">raw_solar_gain_dir</span> <span class="o">=</span> <span class="s">visp_run_1</span>

<span class="k">[PolarimetricCalibration]</span>
<span class="na">raw_pol_dir</span> <span class="o">=</span> <span class="s">~/CS_runs/visp_CS_4</span>
<span class="na">raw_dark_dir</span> <span class="o">=</span> <span class="s">~/CS_runs/visp_CS_4</span>
<span class="na">raw_lamp_gain_dir</span> <span class="o">=</span> <span class="s">~/CS_runs/visp_CS_4</span>
<span class="na">raw_solar_gain_dir</span> <span class="o">=</span> <span class="s">~/CS_runs/visp_CS_4</span>
<span class="na">telescope_db</span> <span class="o">=</span> <span class="s">~/telescope_db.txt</span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <div class="left-footer">
         &copy; 2018, Arthur Eigenbrot
       <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a>
    </div>
   
    <div class="right-footer">
      Last updated on 03 Aug 2018.
    </div>
    <div class="centre-footer">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6
    </div>
  </div>
</footer>
  </body>
</html>